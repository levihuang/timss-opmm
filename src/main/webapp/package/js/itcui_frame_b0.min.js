var itcui=itcui||{};itcui.combo_displayed=false;function ITC_GetAbsPos(e){var f=$(e);var b=f.offset().left;var a=f.offset().top;while(f.attr("parentNode")){f=f.parent();b+=f.offset().left;a+=f.offset().top}var d={left:b,top:a};return d}function _parent(){if(window.parent.document==document){return window}else{return window.parent}}function ITC_Len(e){var a=e.length;var b=0;for(var d=0;d<a;d++){if(e.charCodeAt(d)<27||e.charCodeAt(d)>126){b+=2}else{b++}}return b}function ITC_Substr(g,h,f){var e=0;c=0;a=0;rstr="";var d=g.length;var b=ITC_Len(g);if(h<0){h=b+h}if(f<1){f=b+f}for(e=0;e<d;e++){if(c>=h){break}var a=g.charCodeAt(e);if(a<127){c+=1}else{c+=2}}for(e=e;e<d;e++){var a=g.charCodeAt(e);if(a<127){c+=1}else{c+=2}rstr+=g.charAt(e);if(c>=f){break}}return rstr}function isArray(a){return Object.prototype.toString.call(a)==="[object Array]"}var USE_ITC_FRAME=true;var curr_nav_state,nav_tree_show,_container,navtree_width;if(USE_ITC_FRAME){curr_nav_state=1;nav_tree_show=true;_container=new ITCUI_Container("#mainframe_content");navtree_width=200}function ITCUI_FrameAdjust(){var a=document.documentElement.clientHeight;var b=parseInt(document.documentElement.clientWidth);if(b<740){b=740;if(!$("body").hasClass("ovfx-s")){$("body").addClass("ovfx-s")}$("#mainframe_bottom").css("width",b)}else{$("body").removeClass("ovfx-s");$("#mainframe_bottom").css("width","100%")}$("#mainframe_bottom,#mainframe_navtree,#mainframe_content").css("height",a-90);if(b<940&&nav_tree_show==true){$("#mainframe_navtree").css("width","0px");$("#btn_tree_fold").css("left","1px").html('<img src="images/nav_arrow_expand.png" />');curr_nav_state=0;nav_tree_show=false;navtree_width=0}else{if(b>=940&&nav_tree_show==false){$("#mainframe_navtree").css("width","200px");$("#btn_tree_fold").css("left","201px").html('<img src="images/nav_arrow_fold.png" />');navtree_width=parseInt($("#mainframe_navtree").css("width"));curr_nav_state=1;nav_tree_show=true}}$("#mainframe_content").css("width",b-navtree_width-1);_container.resize()}function ITCUI_Container(b){var e=b;var f={};var d=null;var a=this.switchTo=function(j,h,g){var i=$(e).children(".ITCUI_Iframe_"+d);if(f[d]&&f[d].cache){i.css("display","none")}else{i.remove();delete (f[d])}if(f[j]&&f[j].cache){$(e).children(".ITCUI_Iframe_"+j).css("display","block")}else{$("<iframe  frameborder='no' border='0'></iframe").addClass("ITCUI_ContainerFrame").addClass("ITCUI_Iframe_"+j).appendTo(b);f[j]=g;d=j;this.resize();$(b).children(".ITCUI_Iframe_"+j).attr("src",h)}};this.resize=function(){var g=$(b);g.children(".ITCUI_Iframe_"+d).css({width:g.css("width"),height:g.css("height")})};this.remove=function(g){delete (f[g]);$(e).children(".ITCUI_Iframe_"+g).remove()}}ITCUI_EventHandler=function(){var a={};var b=0;var e=[];var d={};this.registerEvent=function(k,l){var j=a[k];if(!j){a[k]=[];j=a[k]}var g=j.length;var m=false;for(var h=0;h<j.length;h++){if(j[h]==l){return -1}if(j[h]==null){m=true;j[h]=l;g=h}}if(!m){j.push(l)}e.push([g,k]);return e.length-1};this.unregisterEvent=function(h){var g=e[h];if(!g){return}var i=g[1];var f=g[0];e[h]=null;a[eventId][f]=null};this.triggerEvent=function(j,g){if(a[j]){for(var h=0;h<a[j].length;h++){var k=a[j][h];k(g)}}};this.setVariable=function(f,g){};this.getVariable=function(f){}};var _event_handler=_event_handler||new ITCUI_EventHandler();(function($){$.fn.extend({ITCUI_NavTree:function(action,data,opts){var expandedNode=null;var treeWidth=200;var treeName="itc_navtree";var _this=$(this);var eventList={};var expandOnlyOne=false;this.initTree=function(data,opts){var treeHtml='<div class="mainframe_navtree" id="'+treeName+'">';for(var j=0;j<data.length;j++){treeGroup=data[j];var grpId=treeName+"_"+j;if(!treeGroup.items){treeHtml+='<div class="itcui_navtree_nochildren" id="'+treeGroup.id+'">'+treeGroup.grouptitle+"</div>";continue}treeHtml+='<div class="itcui_navtree_grouptitle" id="'+grpId+'">'+treeGroup.grouptitle+"</div>";var subItemid=grpId+"_subitem";treeHtml+='<div id="'+subItemid+'" class="navtree_subitem"';if(!treeGroup.initexpand){treeHtml+=' style="display:none"'}else{expandedNode=grpId}treeHtml+=">";if(treeGroup.items){for(var i=0;i<treeGroup.items.length;i++){var treeitem=treeGroup.items[i];var itemId=treeitem.id||treeName+"_item_"+j+"_"+i;treeHtml+='<div class="itcui_navtree_item" id="'+itemId+'">';treeHtml+=treeitem.title+"</div>";if(treeitem.click){eventList[itemId]=treeitem.click}}}treeHtml+="</div>"}treeHtml+="</div>";_this.html(treeHtml)};this.addEvents=function(data,opts){$("#"+treeName).find(".itcui_navtree_item,.itcui_navtree_nochildren").click(function(){$("#"+treeName).find(".itcui_navtree_item_selected").removeClass("itcui_navtree_item_selected");$(this).addClass("itcui_navtree_item_selected");var evt=eventList[this.id];if(_event_handler){_event_handler.triggerEvent("navTreeItemClick",this.id)}if(evt){if(typeof(evt)=="function"){evt(this.id)}else{eval(evt)}}});$("#"+treeName+" .itcui_navtree_grouptitle").click(function(){var box_id=this.id+"_subitem";var is_fold=$("#"+box_id).css("display")=="none"?true:false;if(expandOnlyOne){$("#"+expandedNode).removeClass("itcui_navtree_grouptitle_expand");$("#"+expandedNode+"_subitem").slideUp()}if(is_fold){expandedNode=this.id;$("#"+box_id).slideDown();$(this).addClass("itcui_navtree_grouptitle_expand")}else{$("#"+box_id).slideUp();$(this).removeClass("itcui_navtree_grouptitle_expand")}})};if(action=="init"){if(opts){if(opts.width&&opts.width>100){treeWidth=opts.width}if(opts.expandOnlyOne){expandOnlyOne=true}}this.initTree(data,opts);this.addEvents(data,opts)}}})})(jQuery);+function(h){var f=".dropdown-backdrop";var b="[data-toggle=dropdown]";var a=function(i){h(i).on("click.bs.dropdown",this.toggle)};a.prototype.toggle=function(l){var k=h(this);if(k.is(".disabled, :disabled")){return}var j=g(k);var i=j.hasClass("open");e();if(!i){if("ontouchstart" in document.documentElement&&!j.closest(".navbar-nav").length){h('<div class="dropdown-backdrop"/>').insertAfter(h(this)).on("click",e)}j.trigger(l=h.Event("show.bs.dropdown"));if(l.isDefaultPrevented()){return}j.toggleClass("open").trigger("shown.bs.dropdown");k.focus()}return false};a.prototype.keydown=function(m){if(!/(38|40|27)/.test(m.keyCode)){return}var l=h(this);m.preventDefault();m.stopPropagation();if(l.is(".disabled, :disabled")){return}var k=g(l);var j=k.hasClass("open");if(!j||(j&&m.keyCode==27)){if(m.which==27){k.find(b).focus()}return l.click()}var n=h("[role=menu] li:not(.divider):visible a",k);if(!n.length){return}var i=n.index(n.filter(":focus"));if(m.keyCode==38&&i>0){i--}if(m.keyCode==40&&i<n.length-1){i++}if(!~i){i=0}n.eq(i).focus()};function e(){h(f).remove();h(b).each(function(j){var i=g(h(this));if(!i.hasClass("open")){return}i.trigger(j=h.Event("hide.bs.dropdown"));if(j.isDefaultPrevented()){return}i.removeClass("open").trigger("hidden.bs.dropdown")})}function g(k){var i=k.attr("data-target");if(!i){i=k.attr("href");i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")}var j=i&&h(i);return j&&j.length?j:k.parent()}var d=h.fn.dropdown;h.fn.dropdown=function(i){return this.each(function(){var k=h(this);var j=k.data("bs.dropdown");if(!j){k.data("bs.dropdown",(j=new a(this)))}if(typeof i=="string"){j[i].call(k)}})};h.fn.dropdown.Constructor=a;h.fn.dropdown.noConflict=function(){h.fn.dropdown=d;return this};h(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(i){i.stopPropagation()}).on("click.bs.dropdown.data-api",b,a.prototype.toggle).on("keydown.bs.dropdown.data-api",b+", [role=menu]",a.prototype.keydown)}(jQuery);ITCUI_Navigation=function(renderTo,items,options){this.MAX_TAB=6;var currTabCount=0;this.handle={};this._items=items;this._options=options||{};this._renderTo=renderTo;var _events={};var _this=this;var hidTabs=[];this.init=function(){_handle=this.handle;_handle.container=$(this._renderTo).html("");_handle.navigation=$("<div></div>").addClass("itcui-navigation").appendTo(_handle.container);_handle.navigation.data("obj",this);_handle.ul=$("<ul></ul>").addClass("itcui-navigation-ul").appendTo(_handle.navigation);_handle.separator=$("<div></div>").addClass("itcui-navigation-separator").appendTo(_handle.navigation);var navHtml="";for(var i=0;i<items.length;i++){var item=items[i];navHtml+=this._makeTabHtml(item);if(item.id){_events[item.id]={};if(item.click){_events[item.id]["click"]=item.click}if(item.beforeClose){_events[item.id]["beforeClose"]=item.beforeClose}if(item.afterClose){_events[item.id]["afterClose"]=item.afterClose}if(item.beforeClick){_events[item.id]["beforeClick"]=item.beforeClick}}}navHtml+='<li class="itcui-navigation-item-options-menu-button itcui-navigation-item" style="float:left">';navHtml+="<b></b></li>";menuHtml='<div class="dropdown" style="position:absolute" id="itcui_nav_toggler_wrap">';menuHtml+='<a data-toggle="dropdown" id="itcui_nav_toggler"></a>';menuHtml+='<ul class="dropdown-menu" role="menu">';menuHtml+="</ul>";menuHtml+="</div>";$("body").append(menuHtml);_handle.ul.html(navHtml);this._bindEvent();_this.arrangeTab()};this._makeTabHtml=function(item){var tabHtml="";if(!typeof(item)=="object"||!item.name){return""}if(!item.front){item.front=""}if(item.id){tabHtml+="<li class='itcui-navigation-item' style='width:120px' id='itcui_nav_tab_"+item.id+"'>"}else{tabHtml+="<li class='itcui-navigation-item' style='width:120px'>"}tabHtml+="<span class='itcui-navigation-item-front'>"+item.front+"</span>";item.title=item.title?item.title:item.name;tabHtml+="<span class='itcui-navigation-item-name' title='"+item.title+"'>"+item.name+"</span>";tabHtml+="<span class='itcui-navigation-item-rear' style='display:inline'>";if(item.closeable){tabHtml+="<a class='itcui-navigation-item-close-button'><b>x</b></a>"}else{tabHtml+="<a class='itcui-navigation-item-close-button' style='display:none'><b>x</b></a>"}tabHtml+="</span>";tabHtml+="</li>";currTabCount+=1;return tabHtml};this._bindEvent=function(){_handle=this.handle;_handle.container.find(".itcui-navigation-item").each(function(e){_this._bindSingleEvent($(this))})};this._bindSingleEvent=function(obj){obj.on("mouseenter",function(e){if(!$(this).hasClass("itcui-navigation-item-selected")){$(this).removeClass("itcui-navigation-item").addClass("itcui-navigation-item-hover")}}).on("mouseleave",function(e){if(!$(this).hasClass("itcui-navigation-item-selected")){$(this).addClass("itcui-navigation-item")}$(this).removeClass("itcui-navigation-item-hover")}).on("click",function(e){e.stopPropagation();var _this=$(this);var ptr=_this.parents(".itcui-navigation").data("obj");if(_this.attr("id")){var id=_this.attr("id").replace("itcui_nav_tab_","");ptr.activeById(id)}if(_this.hasClass("itcui-navigation-item-options-menu-button")){menuHtml='<li targettab="_all"><a class="menuitem"><i class="itcui_close_tab"></i>关闭所有选项卡</a></li>';if(hidTabs.length>0){menuHtml+='<li class="divider"></li>';for(var i=0;i<hidTabs.length;i++){menuHtml+='<li targettab="'+hidTabs[i][0]+'"><a class="menuitem"><i class="itcui_menu_icon"></i>'+hidTabs[i][1]+"</a></li>"}}$("#itcui_nav_toggler_wrap ul").html(menuHtml);$("#itcui_nav_toggler_wrap").data("ptr",ptr);$("#itcui_nav_toggler_wrap ul li").click(function(){var _this=$(this);var ptr=_this.parent().parent().data("ptr");var target=_this.attr("targettab");if(target=="_all"){ptr._closeAll()}else{ptr.activeById(target)}});var pos=ITC_GetAbsPos(this);$("#itcui_nav_toggler_wrap").css({top:pos.top+32,left:pos.left});$("#itcui_nav_toggler").dropdown("toggle")}});obj.find(".itcui-navigation-item-close-button").on("click",function(e){e.stopPropagation()}).on("mouseover",function(e){$(this).addClass("itcui-navigation-item-close-button-hover")}).on("mouseleave",function(e){$(this).removeClass("itcui-navigation-item-close-button-hover")}).on("click",function(e){var _this=$(this);var id=_this.parent().parent().attr("id").replace("itcui_nav_tab_","");var ptr=_this.parents(".itcui-navigation");ptr.data("obj").removeById(id)})};this.insert=function(item,options){options=options||{};var position=options.position||"last";if(!item){return}var tabHtml=this._makeTabHtml(item);if(item.id){_events[item.id]={};if(item.click){_events[item.id]["click"]=item.click}if(item.beforeClose){_events[item.id]["beforeClose"]=item.beforeClose}if(item.afterClose){_events[item.id]["afterClose"]=item.afterClose}if(item.beforeClick){_events[item.id]["beforeClick"]=item.beforeClick}}if(position=="first"){_handle.ul.prepend(tabHtml);_this._bindSingleEvent(_handle.ul.find(".itcui-navigation-item").first())}else{if(position=="last"){_this._bindSingleEvent(_handle.ul.children(".itcui-navigation-item-options-menu-button").before(tabHtml).prev(".itcui-navigation-item"))}else{if(/before/.test(position)){var targetid="#itcui_nav_tab_"+position.replace("before:","");_this._bindSingleEvent(_handle.ul.find(targetid).before(tabHtml).prev(".itcui-navigation-item"))}else{if(/after/.test(position)){var targetid="#itcui_nav_tab_"+position.replace("after:","");_this._bindSingleEvent(_handle.ul.find(targetid).after(tabHtml).next(".itcui-navigation-item"))}}}}_this.arrangeTab()};this.arrangeTab=function(){if(currTabCount<=_this.MAX_TAB){_handle.ul.find(".itcui-navigation-item").first().css("margin-left","0px");return}var firstTab=_handle.ul.find(".itcui-navigation-item-options-menu-button");var flag=true;var findCnt=0;var findOneMore=false;hidTabs=[];while(flag){firstTab=firstTab.prev("li");if(firstTab.length>0){findCnt++;if(findCnt<_this.MAX_TAB){if(firstTab.css("display")=="none"){firstTab.css({display:"block"}).addClass("itcui-navigation-item")}if(firstTab.hasClass("itcui-navigation-item-selected")){findOneMore=true}}else{if(findOneMore){if(firstTab.css("display")=="none"){firstTab.css({display:"block"}).addClass("itcui-navigation-item")}findOneMore=false}else{if(!firstTab.hasClass("itcui-navigation-item-selected")){firstTab.css("display","none").removeClass("itcui-navigation-item");hidTabs.push([firstTab.attr("id").replace("itcui_nav_tab_",""),firstTab.children(".itcui-navigation-item-name").html()])}else{firstTab.addClass("itcui-navigation-item").css("display","inline-block")}}}}else{flag=false}firstTab.css("margin-left","-1px")}_handle.ul.find(".itcui-navigation-item").first().css("margin-left","0px")};this.activeById=function(id){var tabId="#itcui_nav_tab_"+id;if(!this._run(_events[id]["beforeClick"],id)){return}var _this=$(this._renderTo).find(tabId);if(_this.hasClass("itcui-navigation-item-options-menu-button")){return}_this.parent().find("li").removeClass("itcui-navigation-item-selected");_this.addClass("itcui-navigation-item-selected").addClass("itcui-navigation-item");if(_event_handler){_event_handler.triggerEvent("tabSwitch",id)}var fun2=_events[id]["click"];if(fun2){this._run(fun2,id)}if(hidTabs.length>0){this.arrangeTab()}};this._run=function(fun,arg){if(!fun){return true}if(typeof(fun)=="string"){eval(fun);return true}else{return fun(arg)}};this.removeById=function(id){if(!this._run(_events[id].beforeClose,id)){return}var tabId="#itcui_nav_tab_"+id;_handle.ul.find(tabId).remove();if(hidTabs.length>0){this.arrangeTab()}currTabCount-=1;this._run(_events[id].afterClose,id)};this.updateById=function(item){if(!item||!item.id){return}var tabId="#itcui_nav_tab_"+item.id;if(item.name){_handle.ul.find(tabId).find(".itcui-navigation-item-name").html(item.name)}};this._closeAll=function(){_handle.ul.children("li").each(function(){var closeBtn=$(this).find(".itcui-navigation-item-close-button");if(closeBtn.length>0&&closeBtn.css("display")!="none"){var id=$(this).attr("id").replace("itcui_nav_tab_","");_this.removeById(id)}})}};var skinList=[{name:"none",css:"skin/skin_no.css",icon:"skin/skin_no_t.png"},{name:"sky",css:"skin/skin_sky.css",icon:"skin/theme_sky_banner_t.png"},{name:"皮肤5",css:"skin/skin_women.css",icon:"skin/theme_women_full_banner_t.png"},{name:"leaf",css:"skin/skin_leaf.css",icon:"skin/theme_leaf_full_banner_t.png"},{name:"green",css:"skin/skin_green.css",icon:"skin/theme_green_full_banner.png"},{name:"red",css:"skin/skin_red.css",icon:"skin/theme_red_full_banner_t.png"}];(function(a){a.fn.extend({ITCUI_AddSkinMenu:function(b){var b=b||{};applySkin=function(g){if(document.createStyleSheet){document.createStyleSheet(g)}else{a("head").find("link").each(function(){var h=a(this);if(h.attr("itcskin")){h.remove()}});a("<link />").attr("rel","stylesheet").attr("href",g).attr("itcskin",true).appendTo("head")}};menuHtml='<div class="dropdown" style="position:absolute;" id="itcui_skinner_wrap">';menuHtml+='<a data-toggle="dropdown" id="itcui_skinner_toggler"></a>';menuHtml+='<ul class="dropdown-menu" role="menu">';if(b.menuBefore){menuHtml+=b.menuBefore}menuHtml+='<li><a class="menuitem">修改密码</a><li>';menuHtml+='<li class="divider"></li>';menuHtml+='<div style="width:190px;height:132px">';menuHtml+='<p style="margin-left:12px;font-size:12px;font-weight:bold">选择主题</p>';menuHtml+='<div style="width:180px;height:106px;margin-left:14px">';for(var e=0;e<skinList.length;e++){var f=skinList[e];menuHtml+='<span class="itcui_skin_icon" style="background-image:url(\''+f.icon+'\')" targetcss="'+f.css+'">';menuHtml+="</span>"}menuHtml+="</div>";menuHtml+="</div>";if(b.menuAfter){menuHtml+='<li class="divider"></li>';menuHtml+=b.menuAfter}menuHtml+="</ul>";menuHtml+="</div>";a("body").append(menuHtml);var d=a.cookie("itcui_skin");if(d){applySkin(d)}a("#itcui_skinner_wrap").find(".itcui_skin_icon").each(function(){a(this).click(function(){var g=a(this).attr("targetcss");if(a.cookie){a.cookie("itcui_skin",g,{expires:180})}applySkin(g)})});a(this).click(function(g){g.stopPropagation();a("#itcui_skinner_toggler").dropdown("toggle");var h=ITC_GetAbsPos(this);a("#itcui_skinner_wrap").css({top:h.top+16,left:h.left-170})})}})})(jQuery);