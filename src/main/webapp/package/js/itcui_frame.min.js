var itcui=itcui||{};itcui.combo_displayed=false;function ITC_GetAbsPos(e){var b=0;var a=0;while(e.parentNode){var f=$(e);b+=f.offset().left;a+=f.offset().top;e=e.parentNode}var d={left:b,top:a};return d}function _parent(){if(window.parent.document==document){return window}else{return window.parent}}function ITC_Len(e){var a=e.length;var b=0;for(var d=0;d<a;d++){if(e.charCodeAt(d)<27||e.charCodeAt(d)>126){b+=2}else{b++}}return b}function ITC_Substr(g,h,f){var e=0;c=0;a=0;rstr="";var d=g.length;var b=ITC_Len(g);if(h<0){h=b+h}if(f<1){f=b+f}for(e=0;e<d;e++){if(c>=h){break}var a=g.charCodeAt(e);if(a<127){c+=1}else{c+=2}}for(e=e;e<d;e++){var a=g.charCodeAt(e);if(a<127){c+=1}else{c+=2}rstr+=g.charAt(e);if(c>=f){break}}return rstr}function isArray(a){return Object.prototype.toString.call(a)==="[object Array]"}var privMapping=privMapping||null;var _ITC=_ITC||_parent().window._ITC||{};_ITC.navTab=_ITC.navTab||null;_ITC.navTree=_ITC.navTree||null;_ITC.container=_ITC.container||null;_ITC.switchTab=function(a){_ITC.opts.tabSwitchFunc(a)};_ITC._switchTab=function(d){var a=_ITC.opts;var g=null;if(!a.tabMapping){return}if(!_ITC.currTab){_ITC.currTab=d}else{g=_ITC.currTab;_ITC.currTab=d;_ITC.tabTreeStat[g]=_ITC.navTree.ITCUI_NavTree("getstate")}var b=a.tabMapping[d];if(!b){return}if(b.tree){_ITC.noTree=false;_ITC.navTree=$("#"+a.treeId).ITCUI_NavTree("init",b.tree,{expandOnlyOne:true});$("#"+_ITC.opts.treeId).show()}else{_ITC.noTree=true;$("#"+_ITC.opts.treeId).hide()}if(_ITC.initedTab[d]){_ITC.container.switchTo(d,"",{cache:true})}else{var e={cache:true};_ITC.initedTab[d]=true;if(a.tabMapping[d].id){e.id=a.tabMapping[d].id}if(b.tree){var m=true;for(var k=0;k<b.tree.length;k++){if(!m){break}var f=b.tree[k];if(!privMapping||!f.privilege||privMapping[f.privilege]){if(!f.id&&f.items){for(var h=0;h<f.items.length;h++){var l=f.items[h];if(!privMapping||!l.privilege||privMapping[l.privilege]){_ITC.container.switchTo(d,a.treeMapping[l.id],e);_ITC.navTree.ITCUI_NavTree("highlight",l.id);m=false;break}}}else{if(f.id){_ITC.container.switchTo(d,a.treeMapping[f.id],e);_ITC.navTree.ITCUI_NavTree("highlight",f.id);m=false;break}}}}}else{if(b.url){_ITC.container.switchTo(d,b.url,e)}}}_ITC.adjustFrame();if(_ITC.tabTreeStat[d]){_ITC.navTree.ITCUI_NavTree("loadstate",_ITC.tabTreeStat[d])}};_ITC.switchTreeItem=function(a){_ITC.opts.treeSwitchFunc(a)};_ITC._switchTreeItem=function(b){var a=_ITC.opts;if(!a.treeMapping){return}_ITC.container.navigate(a.treeMapping[b])};_ITC.addTab=function(d,b){var a=_ITC.opts;if(d==null){return}if(!d.id||!d.name){return}b=b||{};b.cache=b.cache||false;a.tabMapping[d.id]=b;_ITC.navTab.insert(d)};_ITC.deleteTab=function(b){var a=_ITC.opts;delete (a.tabMapping[b]);_ITC.container.remove(b);delete (_ITC.initedTab[b])};_ITC.init=function(a){if(!_event_handler){console.log("没有找到_event_handler,ITC前端框架初始化失败");return}a=a||{};a.tabId=a.tabId||"itcui_nav_tab_container";a.bottomId=a.bottomId||"mainframe_bottom";a.contentId=a.contentId||"mainframe_content";a.treeId=a.treeId||"mainframe_navtree";$("#"+a.treeId).css({"border-right-color":"rgb(198,198,198)","border-right-style":"solid","border-right-width":"1px"});a.tabs=a.tabs||null;a.tabMapping=a.tabMapping||null;a.tabSwitchFunc=a.tabSwitchFunc||_ITC._switchTab;a.treeWidth=$("#"+a.treeId).width();a.treeSwitchFunc=a.treeSwitchFunc||_ITC._switchTreeItem;_ITC.opts=a;_ITC.noTree=false;_ITC.treeState=1;_ITC.initedTab={};_ITC.currTab=null;_ITC.tabTreeStat={};if(a.tabs){_ITC.navTab=new ITCUI_Navigation("#"+a.tabId,a.tabs,{});_ITC.navTab.init()}_ITC.container=new ITCUI_Container("#"+a.contentId);_event_handler.registerEvent("tabSwitch",_ITC.switchTab);_event_handler.registerEvent("navTreeItemClick",_ITC.switchTreeItem);$("<div id='itc_navtree_fold'><div class='itc_navtree_imgf'></div></div>").appendTo("body");$("#itc_navtree_fold").click(function(){var d=$(this);var b=d.children("div");_ITC.btnAdjust=true;if(b.hasClass("itc_navtree_imgf")){b.removeClass("itc_navtree_imgf").addClass("itc_navtree_imge");_ITC.treeState=0;setTimeout("$('#"+_ITC.opts.treeId+"').animate({'width':'0px'},_ITC.adjustFrame)",10);setTimeout("$('#itc_navtree_fold').animate({'left':'1px'})",10)}else{b.removeClass("itc_navtree_imge").addClass("itc_navtree_imgf");_ITC.treeState=1;setTimeout("$('#"+_ITC.opts.treeId+"').animate({'width':'200px'},_ITC.adjustFrame)",10);setTimeout("$('#itc_navtree_fold').animate({'left':'201px'})",10)}});$("#itc_navtree_fold").css("left","201px");_ITC.adjustFrame();$(window).resize(function(){_ITC.adjustFrame()})};_ITC.switchDefaultTab=function(){var d=_ITC.opts;for(var b=0;b<d.tabs.length;b++){var a=d.tabs[b].id;if(!privMapping||privMapping[d.tabMapping[a].privilege]){_ITC.navTab.activeById(a);return}}};_ITC.adjustFrame=function(){var a=parseInt(document.documentElement.clientHeight);var f=parseInt(document.documentElement.clientWidth);var e=_ITC.opts;if(f<740){f=740;if(!$("body").hasClass("ovfx-s")){$("body").addClass("ovfx-s")}$("#"+e.bottomId).css("width",f)}else{$("body").removeClass("ovfx-s");$("#"+e.bottomId).css("width","100%")}$("#"+e.bottomId+",#"+e.treeId+",#"+e.contentId).css("height",a-90);var d=$("#itc_navtree_fold");var b=d.children("div");if(!_ITC.btnAdjust){if(!_ITC.noTree){if(f<940&&_ITC.treeState==1){$("#"+e.treeId).css("width","0px");_ITC.treeState=0;d.css("left","0px");b.removeClass("itc_navtree_imgf").addClass("itc_navtree_imge")}else{if(f>=940&&_ITC.treeState==0){$("#"+e.treeId).css("width",e.treeWidth+"px");_ITC.treeState=1;d.css("left","201px");b.removeClass("itc_navtree_imge").addClass("itc_navtree_imgf")}}d.show().css({top:(a-90-d.height())/2+90})}else{d.hide()}}var g=(_ITC.noTree||_ITC.treeState==0)?0:e.treeWidth;$("#"+e.contentId).css("width",f-g-1+"px");_ITC.container.resize();_ITC.btnAdjust=false};function ITCUI_Container(a){var d=a;var e={};var b=null;this.switchTo=function(j,g,f){var i=$(d).children(".ITCUI_Iframe_"+b);if(e[b]){if(e[b].cache){i.css("display","none")}else{i.remove();delete (e[b])}}b=j;if(e[j]&&e[j].cache){$(d).children(".ITCUI_Iframe_"+j).css("display","block")}else{var h="";if(f.id){h=" id='"+f.id+"' "}$("<iframe frameborder='no'"+h+" border='0'></iframe").addClass("ITCUI_ContainerFrame").addClass("ITCUI_Iframe_"+j).appendTo(a);e[j]=f;this.resize();$(a).children(".ITCUI_Iframe_"+j).attr("src",g)}};this.navigate=function(f){if(b!=null){$(d).children(".ITCUI_Iframe_"+b).attr("src","about:blank");$(d).children(".ITCUI_Iframe_"+b).attr("src",f)}};this.resize=function(){var f=$(d);f.children(".ITCUI_Iframe_"+b).css({width:f.css("width"),height:f.css("height")})};this.remove=function(f){delete (e[f]);$(d).children(".ITCUI_Iframe_"+f).remove()}}Function.prototype.clone=function(){var e=this;var b=function a(){return e.apply(this,arguments)};for(var d in this){if(this.hasOwnProperty(d)){b[d]=this[d]}}return b};ITCUI_EventHandler=function(){var a={};var b={};this.registerEvent=function(e,h,g){var d=a[e];if(!d){a[e]=[];d=a[e]}var i=(new Date().getTime()%100000)+""+Math.abs(Math.round(Math.random()*1000));if(!g){d.push([h,i])}else{d.push([h.clone(),i])}b[i]=e;return i};this.unregisterEvent=function(l){var k=b[l];if(!k){return}var e=a[k];if(!e){return}var g=0;for(g=0;g<e.length;g++){var d=e[g];if(d[1]==l){break}}var h=[];for(var f=0;f<e.length;f++){if(f!=g){h.push(e[g])}}e=h;delete (b[l])};this.triggerEvent=function(j,g){var e=a[j];var f=[];if(e){for(var h=0;h<e.length;h++){var d=e[h];if(d&&d[0]){f.push(d[0](g))}}}if(f.length>0){return f}return -1}};var _event_handler=_event_handler||_parent()._event_handler||new ITCUI_EventHandler();(function(a){a.fn.extend({ITCUI_NavTree:function(g,f,d){var j=200;var b="itc_navtree";var i=a(this);var e=this;var h=true;e.initTree=function(o,k){var t='<div class="itc_navtree" id="'+b+'">';for(var n=0;n<o.length;n++){treeGroup=o[n];var s=b+"_"+n;if(privMapping&&_ITC&&_ITC.opts&&treeGroup.privilege){if(!privMapping[treeGroup.privilege]){continue}}if(!treeGroup.items){t+='<div class="itc_navtree_nochildren" id="'+treeGroup.id+'">'+treeGroup.grouptitle+"</div>";continue}var l="";if(treeGroup.initexpand){l=" itc_navtree_grouptitle_expand"}t+='<div class="itc_navtree_grouptitle'+l+'" id="'+s+'">'+treeGroup.grouptitle+"</div>";var q=s+"_subitem";t+='<div id="'+q+'" class="navtree_subitem"';if(!treeGroup.initexpand){t+=' style="display:none"'}else{i.data("expandedNode",s)}t+=">";if(treeGroup.items){for(var p=0;p<treeGroup.items.length;p++){var m=treeGroup.items[p];if(privMapping&&_ITC&&_ITC.opts){if(!privMapping[m.privilege]){continue}}var r=m.id||b+"_item_"+n+"_"+p;t+='<div class="itc_navtree_item" id="'+r+'">';t+=m.title+"</div>"}}t+="</div>"}t+="</div>";i.html(t)};e.canTreeSwitch=function(m){if(_event_handler){var l=_event_handler.triggerEvent("navTreeItemBeforeClick",m);for(var k=0;k<l.length;k++){if(l[k]===false){return false}}}return true};e.addEvents=function(l,k){a("#"+b).find(".itc_navtree_item,.itc_navtree_nochildren").click(function(){var m=a(this);if(!e.canTreeSwitch(this.id)){return}m.parents(".itc_navtree").find(".itc_navtree_item_selected").removeClass("itc_navtree_item_selected");m.addClass("itc_navtree_item_selected");if(_event_handler){_event_handler.triggerEvent("navTreeItemClick",this.id)}});a("#"+b+" .itc_navtree_grouptitle").click(function(){e.expandNode(this)})};e.expandNode=function(o){var n=a(o).attr("id");var k=n+"_subitem";var m=a("#"+k).css("display")=="none"?true:false;var l=a(o).parents(".itc_navtree");if(h){l.find(".itc_navtree_grouptitle_expand").each(function(){if(l.attr("id")!=n){a(this).removeClass("itc_navtree_grouptitle_expand");a(this).next(".navtree_subitem").hide()}})}if(m){a("#"+k).slideDown();a(o).addClass("itc_navtree_grouptitle_expand")}else{a("#"+k).slideUp();a(o).removeClass("itc_navtree_grouptitle_expand")}};e.switchTo=function(k){if(!e.canTreeSwitch(k)){return}e.highlight(k);if(_event_handler){_event_handler.triggerEvent("navTreeItemClick",k)}};e.highlight=function(p,m){var k=a("#"+b);k.find(".itc_navtree_item_selected").removeClass("itc_navtree_item_selected");var n=k.find("#"+p);n.addClass("itc_navtree_item_selected");if(!m){var l=n.parent();if(l.hasClass("navtree_subitem")){var o=l.prev(".itc_navtree_grouptitle");if(!o.hasClass("itc_navtree_grouptitle_expand")){e.expandNode(o)}}}};e.getTreeState=function(){var n={};var m=i.find(".itc_navtree_grouptitle");for(var q=0;q<m.length;q++){var s=a(m[q]);n[s.attr("id")]={items:{}};if(s.hasClass("itc_navtree_grouptitle_expand")){n[s.attr("id")]["expanded"]=true;var l=s.next(".navtree_subitem").find(".itc_navtree_item");for(var p=0;p<l.length;p++){var k=a(l[p]);if(k.hasClass("itc_navtree_item_selected")){n[s.attr("id")]["items"][k.attr("id")]={selected:true}}}}}var r=i.find(".itc_navtree_nochildren");for(var q=0;q<r.length;q++){var s=a(r[q]);if(s.hasClass("itc_navtree_item_selected")){n[s.attr("id")]={selected:true}}}return n};e.loadTreeState=function(m){for(var l in m){var p=a("#"+l);if(m[l].expanded){p.addClass("itc_navtree_grouptitle_expand");p.next(".navtree_subitem").show()}else{p.removeClass("itc_navtree_grouptitle_expand");p.next(".navtree_subitem").hide()}if(m[l].selected){p.addClass("itc_navtree_item_selected")}if(m[l].items){for(var n in m[l].items){var p=m[l].items[n];if(p.selected){a("#"+n).addClass("itc_navtree_item_selected")}}}}};if(g=="init"){if(d){if(d.width&&d.width>100){j=d.width}if(d.expandOnlyOne){h=true}}this.initTree(f,d);this.addEvents(f,d)}else{if(g=="highlight"){e.highlight(f,d)}else{if(g=="switchto"){e.switchTo(f)}else{if(g=="getstate"){return e.getTreeState()}else{if(g=="loadstate"){e.loadTreeState(f)}}}}}return i}})})(jQuery);ITCUI_Navigation=function(renderTo,items,options){var currTabCount=0;this.handle={};this._items=items;this._options=options||{};this.MAX_TAB=options.maxTab||10;this._renderTo=renderTo;var _events={};var _this=this;var hidTabs=[];this.init=function(){_handle=this.handle;_handle.container=$(this._renderTo).html("");_handle.navigation=$("<div></div>").addClass("itcui-navigation").appendTo(_handle.container);_handle.navigation.data("obj",this);_handle.ul=$("<ul></ul>").addClass("itcui-navigation-ul").appendTo(_handle.navigation);_handle.separator=$("<div></div>").addClass("itcui-navigation-separator").appendTo(_handle.navigation);var navHtml="";for(var i=0;i<items.length;i++){var item=items[i];if(privMapping&&_ITC&&_ITC.opts){if(!privMapping[_ITC.opts.tabMapping[item.id].privilege]){continue}}navHtml+=this._makeTabHtml(item);if(item.id){_events[item.id]={};if(item.click){_events[item.id]["click"]=item.click}if(item.beforeClose){_events[item.id]["beforeClose"]=item.beforeClose}if(item.afterClose){_events[item.id]["afterClose"]=item.afterClose}if(item.beforeClick){_events[item.id]["beforeClick"]=item.beforeClick}}}navHtml+='<li class="itcui-navigation-item-options-menu-button itcui-navigation-item" style="float:left">';navHtml+="<b></b></li>";menuHtml='<div class="dropdown" style="position:absolute" id="itcui_nav_toggler_wrap">';menuHtml+='<a data-toggle="dropdown" id="itcui_nav_toggler"></a>';menuHtml+='<ul class="dropdown-menu" role="menu">';menuHtml+="</ul>";menuHtml+="</div>";_handle.ul.html(navHtml);$("body").append(menuHtml);this._bindEvent();_this.arrangeTab()};this._makeTabHtml=function(item){var tabHtml="";if(!typeof(item)=="object"||!item.name){return""}if(!item.front){item.front=""}if(item.id){tabHtml+="<li class='itcui-navigation-item' style='width:120px' id='itcui_nav_tab_"+item.id+"'>"}else{tabHtml+="<li class='itcui-navigation-item' style='width:120px'>"}tabHtml+="<span class='itcui-navigation-item-front'>"+item.front+"</span>";item.title=item.title?item.title:item.name;tabHtml+="<span class='itcui-navigation-item-name' title='"+item.title+"'>"+item.name+"</span>";tabHtml+="<span class='itcui-navigation-item-rear' style='display:inline'>";if(item.closeable){tabHtml+="<a class='itcui-navigation-item-close-button'><b>x</b></a>"}else{tabHtml+="<a class='itcui-navigation-item-close-button' style='display:none'><b>x</b></a>"}tabHtml+="</span>";tabHtml+="</li>";currTabCount+=1;return tabHtml};this._bindEvent=function(){_handle=this.handle;_handle.container.find(".itcui-navigation-item").each(function(e){_this._bindSingleEvent($(this))})};this._bindSingleEvent=function(obj){obj.on("mouseenter",function(e){if(!$(this).hasClass("itcui-navigation-item-selected")){$(this).removeClass("itcui-navigation-item").addClass("itcui-navigation-item-hover")}}).on("mouseleave",function(e){if(!$(this).hasClass("itcui-navigation-item-selected")){$(this).addClass("itcui-navigation-item")}$(this).removeClass("itcui-navigation-item-hover")}).on("click",function(e){e.stopPropagation();var _this=$(this);var ptr=_this.parents(".itcui-navigation").data("obj");if(_this.attr("id")){var id=_this.attr("id").replace("itcui_nav_tab_","");ptr.activeById(id)}if(_this.hasClass("itcui-navigation-item-options-menu-button")){menuHtml='<li targettab="_all"><a class="menuitem"><i class="itcui_close_tab"></i>关闭所有选项卡</a></li>';if(hidTabs.length>0){menuHtml+='<li class="divider"></li>';for(var i=0;i<hidTabs.length;i++){menuHtml+='<li targettab="'+hidTabs[i][0]+'"><a class="menuitem"><i class="itcui_menu_icon"></i>'+hidTabs[i][1]+"</a></li>"}}$("#itcui_nav_toggler_wrap ul").html(menuHtml);$("#itcui_nav_toggler_wrap").data("ptr",ptr);$("#itcui_nav_toggler_wrap ul li").click(function(){var _this=$(this);var ptr=_this.parent().parent().data("ptr");var target=_this.attr("targettab");if(target=="_all"){ptr._closeAll()}else{ptr.activeById(target)}});var pos=_this.offset();$("#itcui_nav_toggler_wrap").css({top:pos.top+32,left:pos.left+3});$("#itcui_nav_toggler").dropdown("toggle")}});obj.find(".itcui-navigation-item-close-button").on("click",function(e){e.stopPropagation()}).on("mouseover",function(e){$(this).addClass("itcui-navigation-item-close-button-hover")}).on("mouseleave",function(e){$(this).removeClass("itcui-navigation-item-close-button-hover")}).on("click",function(e){var _this=$(this);var id=_this.parent().parent().attr("id").replace("itcui_nav_tab_","");var ptr=_this.parents(".itcui-navigation");ptr.data("obj").removeById(id)})};this.insert=function(item,options){options=options||{};var position=options.position||"last";if(!item){return}var tabHtml=this._makeTabHtml(item);if(item.id){_events[item.id]={};if(item.click){_events[item.id]["click"]=item.click}if(item.beforeClose){_events[item.id]["beforeClose"]=item.beforeClose}if(item.afterClose){_events[item.id]["afterClose"]=item.afterClose}if(item.beforeClick){_events[item.id]["beforeClick"]=item.beforeClick}}if(position=="first"){_handle.ul.prepend(tabHtml);_this._bindSingleEvent(_handle.ul.find(".itcui-navigation-item").first())}else{if(position=="last"){_this._bindSingleEvent(_handle.ul.children(".itcui-navigation-item-options-menu-button").before(tabHtml).prev(".itcui-navigation-item"))}else{if(/before/.test(position)){var targetid="#itcui_nav_tab_"+position.replace("before:","");_this._bindSingleEvent(_handle.ul.find(targetid).before(tabHtml).prev(".itcui-navigation-item"))}else{if(/after/.test(position)){var targetid="#itcui_nav_tab_"+position.replace("after:","");_this._bindSingleEvent(_handle.ul.find(targetid).after(tabHtml).next(".itcui-navigation-item"))}}}}_this.arrangeTab()};this.arrangeTab=function(){if(currTabCount<=_this.MAX_TAB){_handle.ul.find(".itcui-navigation-item").first().css("margin-left","0px");return}var firstTab=_handle.ul.find(".itcui-navigation-item-options-menu-button");var flag=true;var findCnt=0;var findOneMore=false;hidTabs=[];while(flag){firstTab=firstTab.prev("li");if(firstTab.length>0){findCnt++;if(findCnt<_this.MAX_TAB){if(firstTab.css("display")=="none"){firstTab.css({display:"block"}).addClass("itcui-navigation-item")}if(firstTab.hasClass("itcui-navigation-item-selected")){findOneMore=true}}else{if(findOneMore){if(firstTab.css("display")=="none"){firstTab.css({display:"block"}).addClass("itcui-navigation-item")}findOneMore=false}else{if(!firstTab.hasClass("itcui-navigation-item-selected")){firstTab.css("display","none").removeClass("itcui-navigation-item");hidTabs.push([firstTab.attr("id").replace("itcui_nav_tab_",""),firstTab.children(".itcui-navigation-item-name").html()])}else{firstTab.addClass("itcui-navigation-item").css("display","inline-block")}}}}else{flag=false}firstTab.css("margin-left","-1px")}_handle.ul.find(".itcui-navigation-item").first().css("margin-left","0px")};this.activeById=function(id){var tabId="#itcui_nav_tab_"+id;if(!this._run(_events[id]["beforeClick"],id)){return}var _this=$(this._renderTo).find(tabId);if(_this.hasClass("itcui-navigation-item-options-menu-button")){return}_this.parent().find("li").removeClass("itcui-navigation-item-selected");_this.addClass("itcui-navigation-item-selected").addClass("itcui-navigation-item");if(_event_handler){_event_handler.triggerEvent("tabSwitch",id)}var fun2=_events[id]["click"];if(fun2){this._run(fun2,id)}if(hidTabs.length>0){this.arrangeTab()}};this._run=function(fun,arg){if(!fun){return true}if(typeof(fun)=="string"){eval(fun);return true}else{return fun(arg)}};this.removeById=function(id){if(!this._run(_events[id].beforeClose,id)){return}var tabId="#itcui_nav_tab_"+id;var needActive=_handle.ul.find(tabId).hasClass("itcui-navigation-item-selected");_handle.ul.find(tabId).remove();if(needActive){var tab=_handle.ul.find(".itcui-navigation-item ").first();var id=tab.attr("id").replace("itcui_nav_tab_","");this.activeById(id)}if(hidTabs.length>0){this.arrangeTab()}currTabCount-=1;this._run(_events[id].afterClose,id)};this.updateById=function(item){if(!item||!item.id){return}var tabId="#itcui_nav_tab_"+item.id;if(item.name){_handle.ul.find(tabId).find(".itcui-navigation-item-name").html(item.name)}};this._closeAll=function(){_handle.ul.children("li").each(function(){var closeBtn=$(this).find(".itcui-navigation-item-close-button");if(closeBtn.length>0&&closeBtn.css("display")!="none"){var id=$(this).attr("id").replace("itcui_nav_tab_","");_this.removeById(id)}})}};var skinList=[{name:"none",css:"skin/skin_no.css",icon:"skin/skin_no_t.png"},{name:"sky",css:"skin/skin_sky.css",icon:"skin/theme_sky_banner_t.png"},{name:"皮肤5",css:"skin/skin_women.css",icon:"skin/theme_women_full_banner_t.png"},{name:"leaf",css:"skin/skin_leaf.css",icon:"skin/theme_leaf_full_banner_t.png"},{name:"green",css:"skin/skin_green.css",icon:"skin/theme_green_full_banner.png"},{name:"red",css:"skin/skin_red.css",icon:"skin/theme_red_full_banner_t.png"}];(function(a){a.fn.extend({ITCUI_AddSkinMenu:function(b){var b=b||{};applySkin=function(g){if(document.createStyleSheet){document.createStyleSheet(g)}else{a("head").find("link").each(function(){var h=a(this);if(h.attr("itcskin")){h.remove()}});a("<link />").attr("rel","stylesheet").attr("href",g).attr("itcskin",true).appendTo("head")}};menuHtml='<div class="dropdown" style="position:absolute;" id="itcui_skinner_wrap">';menuHtml+='<a data-toggle="dropdown" id="itcui_skinner_toggler"></a>';menuHtml+='<ul class="dropdown-menu" role="menu">';if(b.menuBefore){menuHtml+=b.menuBefore}menuHtml+='<li><a class="menuitem">修改密码</a><li>';menuHtml+='<li class="divider"></li>';menuHtml+='<div style="width:190px;height:132px">';menuHtml+='<p style="margin-left:12px;font-size:12px;font-weight:bold">选择主题</p>';menuHtml+='<div style="width:180px;height:106px;margin-left:14px">';for(var e=0;e<skinList.length;e++){var f=skinList[e];menuHtml+='<span class="itcui_skin_icon" style="background-image:url(\''+f.icon+'\')" targetcss="'+f.css+'">';menuHtml+="</span>"}menuHtml+="</div>";menuHtml+="</div>";if(b.menuAfter){menuHtml+='<li class="divider"></li>';menuHtml+=b.menuAfter}menuHtml+="</ul>";menuHtml+="</div>";a("body").append(menuHtml);var d=a.cookie("itcui_skin");if(d){applySkin(d)}a("#itcui_skinner_wrap").find(".itcui_skin_icon").each(function(){a(this).click(function(){var g=a(this).attr("targetcss");if(a.cookie){a.cookie("itcui_skin",g,{expires:180})}applySkin(g)})});a(this).click(function(g){g.stopPropagation();a("#itcui_skinner_toggler").dropdown("toggle");var h=ITC_GetAbsPos(this);a("#itcui_skinner_wrap").css({top:h.top+16,left:h.left-170})})}})})(jQuery);